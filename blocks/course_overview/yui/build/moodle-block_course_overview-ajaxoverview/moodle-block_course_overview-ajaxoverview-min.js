YUI.add("moodle-block_course_overview-ajaxoverview",function(e,t){M.block_course_overview=M.block_course_overview||{},M.block_course_overview.ajaxoverview=M.block_course_overview.ajaxoverview||{};var n=M.block_course_overview.ajaxoverview,r={GETOVERVIEW:M.cfg.wwwroot+"/blocks/course_overview/getoverview_ajax.php"},i={COLLAPSIBLEREGION:".collapsibleregion",COURSETITLE:".course_title"};n.CollapsibleRegion=function(){CollapsibleRegion.superclass.constructor.apply(this,arguments)},n.CollapsibleRegion=function(t,n,r){this.userpref=n,this.div=e.one("#"+t);var i=this.div.one("#"+t+"_caption");i.setAttribute("title",r);var s=e.Node.create('<a href="#"></a>'),o=function(e){e.remove(),s.append(e)};i.get("children").each(o,this),i.prepend(s);var u=this.div.get("offsetHeight");this.div.hasClass("collapsed")&&this.div.setStyle("height",i.get("offsetHeight")+"px");var a=new e.Anim({node:this.div,duration:.3,easing:e.Easing.easeBoth,to:{height:i.get("offsetHeight")},from:{height:u}});a.on("end",function(){this.div.toggleClass("collapsed")},this),i.on("click",function(e,t){e.preventDefault(),t.get("running")&&t.stop(),t.set("reverse",this.div.hasClass("collapsed")),this.userpref&&M.util.set_user_preference(this.userpref,!this.div.hasClass("collapsed")),t.run()},this,a)},n.CollapsibleRegion.prototype.userpref=null,n.CollapsibleRegion.prototype.div=null,n.CollapsibleRegion.prototype.icon=null,n.init=function(t){n.courseIds=t.courseIds,n.step=t.overviewStep;if(n.courseIds.length>0){var i={courseids:n.courseIds.splice(0,n.step).join()};e.io(r.GETOVERVIEW,{method:"GET",data:build_querystring(i),on:{complete:n.handleNextOverview}})}},n.handleNextOverview=function(t,s){if(s.responseText){var o=e.JSON.parse(s.responseText);o.error||o.coursecount>0&&e.Array.each(o.coursedata,function(t){var r=e.one("div#course-"+t.id);r.one("> "+i.COURSETITLE).insert(t.content,"after");var s=r.all(i.COLLAPSIBLEREGION);s.each(function(e){new n.CollapsibleRegion(e.get("id"),!1,M.util.get_string("clicktohideshow","moodle"))})})}if(n.courseIds.length>0){var u={courseids:n.courseIds.splice(0,n.step).join()};e.io(r.GETOVERVIEW,{method:"GET",data:build_querystring(u),on:{complete:n.handleNextOverview}})}}},"@VERSION@",{requires:["base","io-base","json-parse","node","anim"]});
